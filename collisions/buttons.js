/*!
* © by Sitsanlis Ilias
* This notice shall be included in all copies or substantial portions of the Software.
*/

$(function(){$("#beginning").button({text:!1,icons:{primary:"ui-icon-triangle-1-w-stop"}}).bind("touchstart mousedown",function(a){dt=-dtSlow;framePlay=playMovie=!0}).bind("touchend mouseup",function(a){framePlay=playMovie=!1;dt=dtSlow;$("#play").button("option",{label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",icons:{primary:"ui-icon-play"}})});$("#end").button({text:!1,icons:{primary:"ui-icon-triangle-1-e-stop"}}).click(function(){framePlay=playMovie=!0;$("#play").button("option",{label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",
    icons:{primary:"ui-icon-play"}})});$("#rewind").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).mousedown(function(){playMovie=!0;dt=-dtSlow*factor}).bind("touchstart",function(a){playMovie=!0;dt=-dtSlow*factor;a.preventDefault()}).bind("touchend mouseup",function(a){dt=dtSlow;playMovie=!1;$("#play").button("option",{label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",icons:{primary:"ui-icon-play"}})});$("#forward").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).mousedown(function(){playMovie=
    !0;dt=dtSlow*factor}).bind("touchstart",function(a){playMovie=!0;dt=dtSlow*factor;a.preventDefault()}).bind("touchend mouseup",function(a){dt=dtSlow;playMovie=!1;$("#play").button("option",{label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",icons:{primary:"ui-icon-play"}})});$("#play").button({text:!1,label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",icons:{primary:"ui-icon-play"}}).click(function(){$(this).text();if(playMovie){playMovie=framePlay=!1;var a={label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",icons:{primary:"ui-icon-play"}}}else framePlay=
    !1,playMovie=!0,a={label:"\u03a0\u03b1\u03cd\u03c3\u03b7",icons:{primary:"ui-icon-pause"}};$(this).button("option",a)});$("#stop").button({text:!1,icons:{primary:"ui-icon-arrowrefresh-1-e"}}).click(function(){playMovie=!1;dt=dtSlow;restart();$("#play").button("option",{label:"\u0388\u03bd\u03b1\u03c1\u03be\u03b7",icons:{primary:"ui-icon-play"}})});$("#slowMotion").button({text:!1}).click(function(){checSlowMotion()});$("#cm").button({text:!1}).click(function(){cm.visible=$(this).is(":checked");stage.update()});
    $("#path").button({text:!1}).click(function(){path1.graphics.clear().ss(2).s("#FF9933").mt(body1.x,body1.y);path2.graphics.clear().ss(2).s("#8C99F7").mt(body2.x,body2.y);cmPath.graphics.clear().ss(2).s("#666666").mt(cm.x,cm.y)});$("#momentum").button({text:!1}).click(function(){pVecContainer.visible=$("#momentum").is(":checked");pVecContainer.visible?(Xmax=340,X0=180,box.graphics.clear().ss(1).s("#666").dr(Xmin,Ymax,Xmax-Xmin,Ymin-Ymax).mt(380,Ymax).dr(380,Ymax,320,Ymin-Ymax).s("#990099").mt(Xg,Yg).f("#990099").dc(Xg,
    Yg,3)):(Xmax=700,X0=360,box.graphics.clear().ss(1).s("#666").dr(Xmin,Ymax,Xmax-Xmin,Ymin-Ymax));xMax=(Xmax-X0)/xScale;xMin=(Xmin-X0)/xScale;yMax=(Ymax-Y0)/yScale;yMin=(Ymin-Y0)/yScale;body1.x>Xmax-R1*xScale&&(body1.x=Xmax-R1*xScale);body1.x<Xmin+R1*xScale&&(body1.x=Xmin+R1*xScale);body1.y>Ymin+R1*yScale&&(body1.y=Ymin+R1*yScale);body1.y<Ymax-R1*yScale&&(body1.y=Ymax-R1*yScale);body2.x>Xmax-R2*xScale&&(body2.x=Xmax-R2*xScale);body2.x<Xmin+R2*xScale&&(body2.x=Xmin+R2*xScale);body2.y>Ymin+R2*yScale&&
    (body2.y=Ymin+R2*yScale);body2.y<Ymax-R2*yScale&&(body2.y=Ymax-R2*yScale);afterNewPos("body1");afterNewPos("body2");positions()})});function checSlowMotion(){dt=dtSlow=$("#slowMotion").is(":checked")?dtInitial/10:dtInitial}
    $(function(){$("#v1Spinner").spinner({min:-10,max:10,step:1,numberFormat:"n",spin:function(a,b){updateValue_v1(a,b.value)},change:function(a){updateValue_v1(a,this.value)}}).val(v01);$("#v1Spinner").keypress(function(a){13==a.which&&(a.preventDefault(),updateValue_v1(a,this.value))});$("#v2Spinner").spinner({min:-10,max:10,step:1,numberFormat:"n",spin:function(a,b){updateValue_v2(a,b.value)},change:function(a){updateValue_v2(a,this.value)}}).val(v02);$("#v2Spinner").keypress(function(a){13==a.which&&
    (a.preventDefault(),updateValue_v2(a,this.value))});$("#\u03b81Spinner").spinner({min:-180,max:180,step:15,numberFormat:"n",spin:function(a,b){updateValue_\u03b81(a,b.value)},change:function(a){updateValue_\u03b81(a,this.value)}}).val((\u03b801*toDeg).toFixed(0));$("#\u03b81Spinner").keypress(function(a){13==a.which&&(a.preventDefault(),updateValue_\u03b81(a,this.value))});$("#\u03b82Spinner").spinner({min:-180,max:180,step:15,numberFormat:"n",spin:function(a,b){updateValue_\u03b82(a,b.value)},change:function(a){updateValue_\u03b82(a,
    this.value)}}).val((\u03b802*toDeg).toFixed(0));$("#\u03b82Spinner").keypress(function(a){13==a.which&&(a.preventDefault(),updateValue_\u03b82(a,this.value))});$("#m1Spinner").spinner({min:1,max:10,step:1,numberFormat:"n",spin:function(a,b){updateValue_m1(a,b.value)},change:function(a){updateValue_m1(a,this.value)}}).val(m1);$("#m1Spinner").keypress(function(a){13==a.which&&(.01>$(this).val()&&$(this).val(.01),100<$(this).val()&&$(this).val(100),a.preventDefault(),updateValue_m1(a,this.value))});
    $("#m2Spinner").spinner({min:1,max:10,step:1,numberFormat:"n",spin:function(a,b){updateValue_m2(a,b.value)},change:function(a){updateValue_m2(a,this.value)}}).val(m2);$("#m2Spinner").keypress(function(a){13==a.which&&(.01>$(this).val()&&$(this).val(.01),100<$(this).val()&&$(this).val(100),a.preventDefault(),updateValue_m2(a,this.value))})});
    function updateValue_v1(a,b){v01=Number(b);\u03b801=\u03b81;v01x=v01*Math.cos(\u03b801);v01y=v01*Math.sin(\u03b801);v02x=v2x;v02y=v2y;v02=v2;\u03b802=\u03b82;updateSpinnerAndSliders();restart()}function updateValue_v2(a,b){v02=Number(b);\u03b802=\u03b82;v02x=v02*Math.cos(\u03b82);v02y=v02*Math.sin(\u03b82);v01x=v1x;v01y=v1y;v01=v1;\u03b801=\u03b81;updateSpinnerAndSliders();restart()}function updateValue_m1(a,b){m1=Number(b);$("#m1Slider").slider({value:b});afterUpdateMass1()}
    function updateValue_m2(a,b){m2=Number(b);$("#m2Slider").slider({value:b});afterUpdateMass2()}function updateValue_\u03b81(a,b){v01=v1;\u03b801=Number(b*toRad);v01x=v01*Math.cos(\u03b801);v01y=v01*Math.sin(\u03b801);v02=v2;\u03b802=\u03b82;v02x=v2x;v02y=v2y;updateSpinnerAndSliders();restart()}function updateValue_\u03b82(a,b){v02=v2;\u03b802=Number(b*toRad);v02x=v02*Math.cos(\u03b802);v02y=v02*Math.sin(\u03b802);v01=v1;\u03b801=\u03b81;v01x=v1x;v01y=v1y;updateSpinnerAndSliders();restart()}
    $(function(){$("#v1Slider").slider({range:"min",min:0,max:10,step:1,value:v01,slide:function(a,b){v01=Number(b.value);\u03b801=\u03b81;v01x=v01*Math.cos(\u03b801);v01y=v01*Math.sin(\u03b801);v02x=v2x;v02y=v2y;v02=v2;\u03b802=\u03b82;updateSpinnerAndSliders();restart()}});$("#v2Slider").slider({range:"min",min:0,max:10,step:1,value:v02,slide:function(a,b){v02=Number(b.value);\u03b802=\u03b82;v02x=v02*Math.cos(\u03b82);v02y=v02*Math.sin(\u03b82);v01x=v1x;v01y=v1y;v01=v1;\u03b801=\u03b81;updateSpinnerAndSliders();
    restart()}});$("#\u03b81Slider").slider({range:"min",min:-180,max:180,step:15,value:(\u03b801*toDeg).toFixed(0),slide:function(a,b){v01=v1;\u03b801=Number(b.value*toRad);v01x=v01*Math.cos(\u03b801);v01y=v01*Math.sin(\u03b801);v02=v2;\u03b802=\u03b82;v02x=v2x;v02y=v2y;updateSpinnerAndSliders();restart()}});$("#\u03b82Slider").slider({range:"min",min:-180,max:180,step:15,value:(\u03b802*toDeg).toFixed(0),slide:function(a,b){v02=v2;\u03b802=Number(b.value*toRad);v02x=v02*Math.cos(\u03b802);v02y=v02*
    Math.sin(\u03b802);v01=v1;\u03b801=\u03b81;v01x=v1x;v01y=v1y;updateSpinnerAndSliders();restart()}});$("#m1Slider").slider({range:"min",min:1,max:10,step:1,value:m1,slide:function(a,b){m1=Number(b.value);$("#m1Spinner").spinner().val(b.value);afterUpdateMass1()}});$("#m2Slider").slider({range:"min",min:1,max:10,step:1,value:m2,slide:function(a,b){m2=Number(b.value);$("#m2Spinner").spinner().val(b.value);afterUpdateMass2()}})});
    $(function(){$("#vectorsScaleSlider").slider({range:"min",min:0,max:2,step:.01,value:vectorsScale,create:function(){$("#textVectorsScaleSlider").text($(this).slider("value").toFixed(1))},slide:function(a,b){$("#textVectorsScaleSlider").text(b.value.toFixed(1));vectorsScale=Number(b.value);positions()}})});$(document).ready(function(a){a=$("#refresh");"yes"==a.val()?location.reload(!0):a.val("yes")});
    function updateSpinnerAndSliders(){$("#v1Spinner").spinner().val(v01.toFixed(1));$("#v1Slider").slider({value:v01});$("#v2Spinner").spinner().val(v02.toFixed(1));$("#v2Slider").slider({value:v02});$("#\u03b81Spinner").spinner().val((\u03b801*toDeg).toFixed(0));$("#\u03b81Slider").slider({value:\u03b801*toDeg});$("#\u03b82Spinner").spinner().val((\u03b802*toDeg).toFixed(0));$("#\u03b82Slider").slider({value:\u03b802*toDeg});x01=x1;y01=y1;x02=x2;y02=y2}
    function afterUpdateMass1(){R1=.25*Math.sqrt(m1);1.7<R1&&(R1=1.7);.1>R1&&(R1=.1);ArangeOverlayWithWall(body1,R1);x1=x01=(X0-body1.x)/xScale;y1=y01=(Y0-body1.y)/yScale;Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))<=R1+R2-.001&&arrangeBody1();restart()}function afterUpdateMass2(){R2=.25*Math.sqrt(m2);1.7<R2&&(R2=1.7);.1>R2&&(R2=.1);ArangeOverlayWithWall(body2,R2);x2=x02=(X0-body2.x)/xScale;y2=y02=(Y0-body2.y)/yScale;Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))<=R1+R2-.001&&arrangeBody2();restart()};