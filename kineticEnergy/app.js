/*!
* © by Sitsanlis Ilias
* This notice shall be included in all copies or substantial portions of the Software.
* Creative Commons 4.0/CC BY - NC - SA 4.0. 
*/

helpText.text = "Εφαρμογή με την οποία μπορούμε να μελετήσουμε έννοια κινητική ενέργεια. Η κινητική ενέργεια του σώματος μετατρέπεται σε θερμική κατά την κίνησή του μέσα στο ξύλο. "

var canvas,stage,self,controlBoxContainer,marginVarNumber=129,marginVar=marginVarNumber,PI=Math.PI,toDeg=180/PI,toRad=PI/180,X0=200,Y0=280,t=0,dt=1/60,dtInitial=dt,dtSlow=dt,factor=.5,playMovie=!1,framePlay=!1,xScale=20,yScale=-xScale,aScale=10,vScale=2.5,FScale=1,EScale=.25,vectorScale=1,valuesText=new createjs.Text("ΤΙΜΕΣ ΜΕΤΑΒΛΗΤΩΝ","12px Trebuchet MS");valuesText.set({x:360,y:375,textAlign:"center"});var xText_txt=new createjs.Text("","12px Trebuchet MS");xText_txt.set({x:360,y:200,textAlign:"center"});var Ki_txt=new createjs.Text("","12px Trebuchet MS");Ki_txt.set({x:360,y:160,textAlign:"center"});var x,v,Ki,track=trackShape(),Yg=300,Fi=-50,F=Fi,m=1,xi=-6,vi=10,FVec=createVector("#990099",!1,!1);FVec.set({x:-100,y:-100});var FText=FVecTextShape(),vVec=createVector("#0000FF",!1,!1);vVec.set({x:-100,y:-100});var vText=vTextShape(),xVec=createVector("#FF0000",!1,!1);xVec.set({x:-100,y:-100});var xText=xTextShape(),body=new createjs.Shape,KText=KTextShape(),energy=new createjs.Shape,energyClone=new createjs.Shape,kineticEnergyContainer=new createjs.Container,T=5;function init(){stage=new createjs.Stage(document.getElementById("demoCanvas")),createjs.Touch.enable(stage),stage.enableMouseOver(),stage.enableDOMEvents(!0),canvas=document.getElementById("demoCanvas"),self=stage,controlBoxContainer=new createjs.Container,self.addChild(controlBoxContainer);var e=new createjs.DOMElement("foo");controlBoxContainer.addChild(e),controlBoxContainer.x=2.5,controlBoxContainer.y=2.5;var t=new createjs.Shape;t.graphics.f("#999").dr(X0,Y0-30,520,60).ss(2).s("#000").mt(0,Y0+30).lt(720,Y0+30),stage.addChild(t),stage.addChild(track),stage.addChild(body),kineticEnergyContainer.addChild(KText),kineticEnergyContainer.addChild(energyClone),kineticEnergyContainer.addChild(energy),kineticEnergyContainer.addChild(Ki_txt),stage.addChild(kineticEnergyContainer),stage.addChild(xText_txt),stage.addChild(FVec),stage.addChild(FText).set({x:-10,y:-10}),stage.addChild(vVec),stage.addChild(vText).set({x:-10,y:-10}),stage.addChild(xVec),stage.addChild(xText).set({x:-10,y:-10}),createRegister(),stage.addChild(Ψ),addFunction(),showHideVariables(),handleComplete(),initialize(),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",tick),canvas.style.visibility="visible",document.getElementById("variables").style.visibility="visible"}function initialize(){kineticEnergyContainer.visible=!1,track.set({x:X0,y:Y0}),KText.set({x:X0+42,y:80}),energyClone.alpha=.5,FVec.y=Y0,vVec.y=Y0-20,xVec.x=X0,xVec.y=Y0-50,track.scaleX=0,drawBody(),body.y=Y0,restart()}function restart(){isOk||stage.removeAllChildren(),0!=vectorScale&&(xi=-120/(xScale*vectorScale)),t=0,x=xi,a=(F=Fi)/m,Ki=.5*m*(v=vi)*vi,Ki_txt.text=Ki.toFixed(0)+" J",Ki_txt.x=X0+Ki*EScale*vectorScale+20,t0=-xi/vi,tTotal=t0-vi/a,energyClone.graphics.clear().ss(2).f("#FF9900").dr(X0,150,.5*m*v*v*EScale*vectorScale,30),positions()}function tick(e){playMovie&&(framePlay=framePlay&&(playMovie=!1),0<=t+dt&&t<=100&&((t+=dt)<=tTotal?v=t>=t0?(x=vi*(t-t0)+.5*a*(t-t0)*(t-t0),vi+a*(t-t0)):(x=xi+vi*t,vi):(x=-.5*vi*vi/a,F=v=0,$("#play").trigger("click")),positions()))}function positions(){X=0!=vectorScale?X0+x*xScale*vectorScale:X0-120,body.x=X,FVec.x=X,FVec.setScaleX(0<x?F*FScale*vectorScale:0),updateTextVector(FText,FVec,10,0),vVec.x=X,vVec.setScaleX(v*vScale*vectorScale),updateTextVector(vText,vVec,10,0),xVec.setScaleX(0<x?x*xScale*vectorScale:0),updateTextVector(xText,xVec,10,0),xText_txt.text=x.toFixed(1)+" m",updateTextVector(xText_txt,xVec,-x*xScale*vectorScale/2,-8),track.scaleX=0<x?(x*xScale*vectorScale-10)/100:0,energy.graphics.clear().ss(2).f("#FF9900").dr(X0,150,.5*m*v*v*EScale*vectorScale,30),stage.update()}