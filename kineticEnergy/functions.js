/*!
* © by Sitsanlis Ilias
* This notice shall be included in all copies or substantial portions of the Software.
* Creative Commons 4.0/CC BY - NC - SA 4.0. 
*/

function round(e,t){return Number(e.toFixed(t))}function fixAngle(e){return e-360*Math.floor(e/360)}function rnd(e,t){return Math.floor(Math.random()*(t-e+1))+e}function getRandomColor(){return"#"+Math.random().toString(16).slice(2,8).toUpperCase()}function drawDotLine(e,t,a,r,n){var o=e.graphics;o.clear(),o.setStrokeStyle(.8),o.setStrokeDash([3,3],1),o.beginStroke("#666666"),o.moveTo(t,a),o.lineTo(r,n),o.endStroke()}function makeDragPoint(){var e=new createjs.Shape,t=e.graphics;return t.setStrokeStyle(1),t.beginStroke("#000000"),t.beginFill("#FFFF99"),t.dc(0,0,3),t.endStroke(),t.endFill(),e.hitArea=new createjs.Shape,e.hitArea.graphics.beginStroke("#FFFFFF"),e.hitArea.graphics.beginFill("#FFFFFF"),e.hitArea.graphics.dc(0,0,15),e.hitArea.graphics.endStroke(),e.hitArea.alpha=.01,e.name="dragPoint",e}function makeDragAndRotateLine(e){var t=new createjs.Container,a=makeDragPoint(),r=new createjs.Shape,n=r.graphics;return n.setStrokeStyle(1.5),n.setStrokeDash([5,5],1),n.beginStroke("#000000"),n.moveTo(0,0),n.lineTo(e,0),n.endStroke(),r.hitArea=new createjs.Shape,r.hitArea.graphics.setStrokeStyle(30),r.hitArea.graphics.beginStroke("#ffffff"),r.hitArea.graphics.mt(0,0),r.hitArea.graphics.lt(e,0),r.hitArea.graphics.endStroke(),r.hitArea.alpha=.01,r.name="line",a.x=0,a.y=0,r.regX=e/2,t.addChild(r),t.addChild(a),t.addEventListener("mousedown",mouseDownGen),t.addEventListener("pressup",pressUpGen),t}function drawArc(e,t,a,r,n,o,i){var s=e.graphics;s.clear(),s.beginStroke("#0099FF"),s.beginFill("#0099FF"),s.mt(t,a),s.arc(t,a,r,n,o,i),s.closePath(),s.endFill(),s.endStroke()}function arangeVectorsInContainer(e){e.sortChildren(function(e,t){return Math.abs(e.F)>Math.abs(t.F)?-1:Math.abs(e.F)<Math.abs(t.F)?1:0})}function createVector(e,t,a){null==e&&(e="#000000"),null==t&&(t=!1),null==a&&(a=!1);var r=new createjs.Container,n=new createjs.Shape,n=createLineVector(e);r.addChild(n);var o,i,s=new createjs.Shape,s=createArrowVector(e);return r.addChild(s),t&&(new createjs.Shape,o=createDragLineVector(),r.addChild(o)),a&&(new createjs.Shape,i=createCircleVector(e),r.addChild(i)),r}function createLineVector(e){null==e&&(e="#000000");var t=new createjs.Shape,a=t.graphics;return a.setStrokeStyle(2.5),a.beginStroke(e),a.moveTo(0,0),a.lineTo(100,0),a.endStroke(),t}function createDragLineVector(){var e=new createjs.Shape,t=e.graphics;return t.setStrokeStyle(25),t.beginStroke("#ffffff"),t.moveTo(0,0),t.lineTo(100,0),t.endStroke(),e.alpha=.01,e.name="dragLine",e}function createCircleVector(e){null==e&&(e="#000000");var t=new createjs.Shape,a=t.graphics;return a.beginFill(e),a.dc(0,0,4),t.name="startVector",t}function createArrowVector(e){null==e&&(e="#000000");var t=Math.PI/180,a=new createjs.Shape,r=a.graphics;return r.setStrokeStyle(1.5,"round","round"),r.beginStroke(e),r.beginFill(e),r.moveTo(0,0),r.lineTo(8*Math.cos(155*t),-8*Math.sin(155*t)),r.lineTo(-5.5,0),r.lineTo(8*Math.cos(205*t),-8*Math.sin(205*t)),r.closePath(),r.endFill(),r.endStroke(),a.x=100,a}function updateTextVector(e,t,a,r){var n=t.rotation;arrowVec=t.getChildAt(1);var o=arrowVec.x;o<0&&(o=Math.abs(o),n+=180);var i=(o=Math.abs(o))*Math.cos(n*toRad),s=o*Math.sin(n*toRad),c=t.x+i+a*Math.cos(n*toRad)+r*Math.cos((n+90)*toRad),h=t.y+s+a*Math.sin(n*toRad)+r*Math.sin((n+90)*toRad);e.x=c,e.y=h,e.textBaseline="alphabetic",e.textAlign="center",Math.abs(o)<5?e.alpha=0:e.alpha=1}function mouseDownVector(e){var t=canvas.width,a=canvas.height;e.target.offset={x:e.target.x-e.stageX*(720/t),y:e.target.y-e.stageY*(420/a)},e.target.addEventListener("pressmove",pressMoveVector)}function pressMoveVector(e){var t=canvas.width,a=canvas.height,r=e.stageX*(720/t)+e.target.offset.x,n=e.stageY*(420/a)+e.target.offset.y,r=Math.round(r/Fscale)*Fscale,n=Math.round(n/Fscale)*Fscale;e.target.x=r,e.target.y=n}function pressUpVector(e){e.target.parent.removeEventListener("pressmove",pressMoveVector)}function drawBody(){body.graphics.f("#fff").ss(2,"round","round").s("#666").mt(0,0).lt(-21.75,11).lt(-21.75,-11).cp(),body.regX=-13}createjs.Container.prototype.setScaleX=function(e){var t,a=this.getChildAt(0),r=this.getChildAt(1),n=this.getChildByName("dragLine"),o=this.getChildByName("startVector");null!=o&&(o.x=e),t=(r.x=e)<0?-1:1,25<=Math.abs(e)?(r.scaleX=t,a.scaleX=(e-t)/100,null!=n&&(n.scaleX=(e-t)/100)):(r.scaleX=4*e/100,a.scaleX=e/100-4*e/100/100,null!=n&&(n.scaleX=e/100-4*e/100/100))};