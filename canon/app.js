/*!
* © by Sitsanlis Ilias
* This notice shall be included in all copies or substantial portions of the Software.
* Creative Commons 4.0/CC BY - NC - SA 4.0. 
*/

helpText.text = "Εφαρμογή με την οποία μπορούμε να μελετήσουμε την διατήρηση της ορμής κατά την εκπυρσοκρότηση ενός κανονιού. Έχουμε την δυνατότητα να μεταβάλλουμε τις μάζες των σωμάτων και την ταχύτητα με την οποία εκτοξεύεται το βλήμα. Αν επιλέξουμε τριβή τότε στο κανόνι θα ασκηθεί δύναμη και τελικά θα το σταματήσει. Αν επιλέξουμε χάρακας τότε εμφανίζεται ένας χάρακας με τον οποίο μπορούμε να μετρήσουμε την απόσταση που διεύνυσε ένα σώμα για να υπολογίσουμε την ταχύτητά του. Έχουμε την δυνατότητα να σύρουμε τα διανύσματα των ορμών ώστε να τα συγκρίνουμε."

var canvas,stage,self,controlBoxContainer,marginVarNumber=135,marginVar=marginVarNumber,PI=Math.PI,toDeg=180/PI,toRad=PI/180,X0=360,Y0=240,t=0,dt=1/120,dtInitial=dt,dtSlow=dt,factor=.5,playMovie=!1,framePlay=!1,xScale=40,yScale=-xScale,FScale=1,vectorScale=1,valuesText=new createjs.Text("ΤΙΜΕΣ ΜΕΤΑΒΛΗΤΩΝ","12px Trebuchet MS");valuesText.set({x:360,y:375,textAlign:"center"});var canon=canonShape(),wheel=wheelShape(),gun=new createjs.Container;gun.set({x:X0,y:Y0,regY:25});var X1,X2,x1,v1,x2,v2,firstTime,vSCALE=1.2,pSCALE=1.5,m=1,M=10,r=25/xScale,a=0,v0=100,v1Vec=createVector("#0000ff",!1,!1),v2Vec=createVector("#0000ff",!1,!1),v1Text=v1TextShape(),v2Text=v2TextShape(),p1Vec=createVector("#990099",!0,!1),p1Text=p1TextShape(),p2Vec=createVector("#990099",!0,!1),p2Text=p2TextShape();p1Vec.addEventListener("mousedown",mouseDownVector),p1Vec.addEventListener("pressup",pressUpVector),p1Vec.mouseChildren=!1,p1Vec.name="p1Vec",p2Vec.addEventListener("mousedown",mouseDownVector),p2Vec.addEventListener("pressup",pressUpVector),p2Vec.mouseChildren=!1,p2Vec.name="p1Vec";var ball=makePoint("#000","ball",4),ground=new createjs.Shape,ruler=new createjs.Container;function init(){stage=new createjs.Stage(document.getElementById("demoCanvas")),createjs.Touch.enable(stage),stage.enableMouseOver(),stage.enableDOMEvents(!0),canvas=document.getElementById("demoCanvas"),self=stage,controlBoxContainer=new createjs.Container,self.addChild(controlBoxContainer);var e=new createjs.DOMElement("foo");controlBoxContainer.addChild(e),controlBoxContainer.x=2.5,controlBoxContainer.y=2.5,stage.addChild(ground),gun.addChild(canon),gun.addChild(wheel),stage.addChild(gun),stage.addChild(v1Vec),stage.addChild(v2Vec),stage.addChild(v1Text),stage.addChild(v2Text),stage.addChild(p1Vec),stage.addChild(p2Vec),stage.addChild(p1Text),stage.addChild(p2Text),stage.addChild(ball),stage.addChild(ruler),stage.addChild(valuesText),createRegister(),stage.addChild(Ψ),addFunction(),showHideVariables(),handleComplete(),initialize(),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",tick),canvas.style.visibility="visible",document.getElementById("variables").style.visibility="visible"}function initialize(){ball.y=v1Vec.y=Y0-40,v2Vec.y=Y0-25,p1Vec.y=p2Vec.y=Y0-60,drawGround(),ground.y=Y0,drawRuler(12),restart()}function restart(){isOk||stage.removeAllChildren(),firstTime=!0,x1=.55,y1=t=0,θ=0,x2=-.75,v2=v1=0,positions()}function tick(e){playMovie&&(framePlay=framePlay&&(playMovie=!1),0<=t+dt?(t+=dt,firstTime?(t=0,v2=-m*(v1=v0)/M,firstTime=!1):(x1+=v1*dt,dx=v2*dt+.5*a*dt*dt,dθ=dx/r,v2<0?(v2+=a*dt,θ+=dθ,x2+=dx):(x2+=-v2*v2/(2*a),v2=0,$("#play").trigger("click"))),positions()):restart())}function positions(){X1=X0+x1*xScale,ball.x=X1,v1Vec.x=X1,v1Vec.setScaleX(v1*vSCALE*vectorScale),updateTextVector(v1Text,v1Vec,8,0),p1Vec.x=X1,p1Vec.setScaleX(m*v1*pSCALE*vectorScale),updateTextVector(p1Text,p1Vec,10,0),X2=X0+x2*xScale,gun.x=X2,wheel.rotation=θ*toDeg,v2Vec.x=X2,v2Vec.setScaleX(v2*vSCALE*vectorScale),updateTextVector(v2Text,v2Vec,8,0),p2Vec.x=X2,p2Vec.setScaleX(M*v2*pSCALE*vectorScale),updateTextVector(p2Text,p2Vec,10,0),valuesText.text="t = "+t.toFixed(2)+" s, V = "+v2.toFixed(2)+" m/s",stage.update()}ruler.set({x:360,y:60,alpha:.75,visible:!1,regX:12*xScale/2,regY:12.5}),ruler.name="ruler",ruler.addEventListener("mousedown",mouseDownRuler),ruler.addEventListener("pressup",pressUpRuler);