/**
 * =============================================
 * ИСПРАВЛЕНИЕ ВЫРАВНИВАНИЯ ФОРМУЛ В МОБИЛЬНОЙ ВЕРСИИ
 * =============================================
 */

/* ===== ОСНОВНЫЕ СТИЛИ ДЛЯ ФОРМУЛ ===== */
/**
 * 1. Центрируем формулы по горизонтали
 * 2. Добавляем автоматическую прокрутку для длинных формул
 * 3. Сохраняем читаемость на всех устройствах
 */
.formula-important {
  display: block; /* Изменяем на блочный элемент */
  margin: 25px auto; /* Центрирование по горизонтали */
  padding: 15px;
  text-align: center;
  background-color: white;
  border: 2px solid #8B0000;
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(139, 0, 0, 0.1);
  width: fit-content; /* Ширина по содержимому */
  max-width: 100%; /* Не шире родительского контейнера */
  overflow-x: auto; /* Горизонтальная прокрутка при необходимости */
}

/* ===== АДАПТИВНЫЕ СТИЛИ ДЛЯ МОБИЛЬНЫХ УСТРОЙСТВ ===== */
@media (max-width: 768px) {
  /**
   * Специальные настройки для мобильных устройств:
   * 1. Убираем фиксированную ширину
   * 2. Добавляем небольшие отступы по бокам
   * 3. Сохраняем центрирование
   */
  .formula-important {
    width: 90%; /* Занимаем 90% ширины экрана */
    margin: 20px auto; /* Центрирование с отступами */
    padding: 10px 5px; /* Уменьшенные отступы */
    display: block; /* Обеспечиваем блочное поведение */
  }
  
  /* Дополнительные стили для контейнера формул */
  .formula-container {
    padding: 0 10px; /* Добавляем отступы по бокам */
  }
}

/* ===== ДОПОЛНИТЕЛЬНЫЕ ИСПРАВЛЕНИЯ ДЛЯ MathJax ===== */
/**
 * Обеспечиваем правильное отображение формул MathJax
 * в мобильной версии
 */
.MathJax_Display {
  overflow-x: auto; /* Горизонтальная прокрутка */
  overflow-y: hidden; /* Скрываем вертикальную прокрутку */
  -webkit-overflow-scrolling: touch; /* Плавная прокрутка на iOS */
  text-align: center; /* Центрирование содержимого */
  margin: 1em 0; /* Отступы сверху и снизу */
  padding: 0 10px; /* Отступы по бокам */
  max-width: 100%; /* Не шире экрана */
}

/* Исправление для мобильных устройств */
@media (max-width: 480px) {
  .MathJax_Display {
    padding: 0 5px; /* Уменьшенные отступы */
    font-size: 90%; /* Немного уменьшаем размер формулы */
  }
  
  /* Специальные стили для переноса длинных формул */
  .MathJax {
    white-space: normal !important; /* Разрешаем перенос */
    word-wrap: break-word !important; /* Перенос длинных слов */
  }
}

/* ===== ОБЩИЕ РЕКОМЕНДАЦИИ ПО ВЕРСТКЕ ФОРМУЛ ===== */
/**
 * 1. Всегда используйте контейнер для формул
 * 2. Добавляйте класс .formula-container к div, содержащему формулу
 * 3. Для очень длинных формул используйте горизонтальную прокрутку
 */
.formula-container {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 1em 0;
  padding: 0 10px;
}
