

helpText.text = "Вы можете перетаскивать точки, соответствующие времени t, t\u2081, t\u2082 чтобы указать интервал времени, в течение которого будет рассчитываться средняя скорость."

var canvas,stage,self,controlBoxContainer,marginVarNumber=93,marginVar=marginVarNumber,PI=Math.PI,toDeg=180/PI,toRad=PI/180,X0=90,Y0=80,YAv=160,t=0,dt=.02,dtInitial=dt,dtSlow=dt,factor=.5,playMovie=!1,framePlay=!1,xScale=500,yScale=-xScale,FScale=1,vectorScale=1,res_txt=new createjs.Text("","12px Trebuchet MS");res_txt.set({x:350,y:10,textAlign:"left"});var vAv_txt=new createjs.Text("","12px Trebuchet MS");vAv_txt.set({x:560,y:10,textAlign:"left"});var t1_txt=new createjs.Text("","12px Trebuchet MS");t1_txt.set({x:546,y:375,textAlign:"center"});var t2_txt=new createjs.Text("","12px Trebuchet MS");t2_txt.set({x:625,y:375,textAlign:"center"});var xAxis=new createjs.Container;xAxis.set({x:X0,y:Y0,name:"xAxis"});var xAxisAv=new createjs.Container;xAxisAv.set({x:X0,y:YAv,name:"xAxisAv"});var xAv,vAv,Hpx=87.5,Lpx=245,YG=290,Xx=230,Yx=YG+.8*Hpx,gridFlag=!1,tSCALE=35,xSCALE=-145,vVectorScale=120,t1=0,t2=3,startTime=0,endTime=7,graphX_mc=new createjs.Shape;graphX_mc.alpha=.5;var slope=new createjs.Shape;slope.graphics.setStrokeStyle(2).beginStroke("#0000FF").mt(-35,0).lt(35,0),slope.alpha=.8,slope.name="slope";var slopeAv=new createjs.Shape;slopeAv.alpha=.8;var tDot=new createjs.Shape,t1Dot=new createjs.Shape,t2Dot=new createjs.Shape,xDot=new createjs.Shape,x1Dot=new createjs.Shape,x2Dot=new createjs.Shape,car_mc=carShape("#00bfff");car_mc.y=Y0;var motoMan=motoManShape(),wheel1=wheelShape(),wheel2=wheelShape(),motoMan_mc=new createjs.Container;motoMan_mc.y=130;var t1Text_mc=t1TextShape(),t2Text_mc=t2TextShape(),tText_mc=tTextShape();tText_mc.set({y:385}),t1Text_mc.set({y:385}),t2Text_mc.set({y:385});var dtText_mc=dtTextShape(),vText_mc=vTextShape(),vAvText_mc=vAvTextShape(),tPoint_mc=makeDragPoint("#000","tPoint_mc",2.5);tPoint_mc.x=Xx+t*tSCALE,tPoint_mc.y=Yx;var t1Point_mc=makeDragPoint("#000","t1Point_mc",2.5);t1Point_mc.x=Xx+t1*tSCALE,t1Point_mc.y=Yx;var t2Point_mc=makeDragPoint("#000","t2Point_mc",2.5);t2Point_mc.x=Xx+t2*tSCALE,t2Point_mc.y=Yx,tPoint_mc.addEventListener("mousedown",mouseDownGen),tPoint_mc.addEventListener("pressup",pressUpGen),tPoint_mc.mouseChildren=!1,t1Point_mc.addEventListener("mousedown",mouseDownGen),t1Point_mc.addEventListener("pressup",pressUpGen),t1Point_mc.mouseChildren=!1,t2Point_mc.addEventListener("mousedown",mouseDownGen),t2Point_mc.addEventListener("pressup",pressUpGen),t2Point_mc.mouseChildren=!1;var vVec=createSlimVector("#0066FF");vVec.y=Y0-30,vVec.setSlimScaleX(v(t)*vVectorScale),updateTextSlimVector(vText_mc,vVec,10,0);var vAvVec=createSlimVector("#009900");vAvVec.y=motoMan_mc.y-24,vAvVec.setSlimScaleX((x(t2)-x(t1))/(t2-t1)*vVectorScale);var xVec=createSlimVector("#990000");xVec.y=car_mc.y-6,xVec.x=X0+x(t1)*xScale;var xAvVec=createSlimVector("#990000");xAvVec.y=149,xAvVec.x=X0+x(t1)*xScale;var xGraphPoints=new createjs.Container,xAvDotLines=new createjs.Shape,xPoint=makePoint("#000","xPoint",2),xAvPoint=makePoint("#000","xAvPoint",2),xPlot=new createjs.Shape;xPlot.set({x:Xx,y:Yx});var tAxisX=new createjs.Container;tAxisX.set({x:Xx,y:Yx});var yAxisX=new createjs.Container;yAxisX.set({x:Xx,y:Yx}),tAxisX.name="tAxisX",tAxisX.addEventListener("mousedown",mouseDownGen),tAxisX.addEventListener("pressup",pressUpGen),tAxisX.mouseChildren=!1;var xShapeMask=new createjs.Shape;xShapeMask.graphics.drawRect(Xx-15,YG-Hpx-3,Lpx+15+3,2*Hpx+12),xPlot.mask=xShapeMask,xAvDotLines.mask=xShapeMask;var DYMinX=+Hpx,DYMaxX=+Hpx,DYMaxX=2*Hpx-(DYMinX=YG+Hpx-Yx),xGraphText=xGraphTextShape(),txGraphText=tGraphTextShape(),txShapeMask=new createjs.Shape;txShapeMask.graphics.drawRect(Xx-5,YG-Hpx,Lpx+50,2*Hpx),tAxisX.mask=txShapeMask;var carContainer=new createjs.Container,motoContainer=new createjs.Container;function init(){stage=new createjs.Stage(document.getElementById("demoCanvas")),createjs.Touch.enable(stage),stage.enableMouseOver(),stage.enableDOMEvents(!0),canvas=document.getElementById("demoCanvas"),self=stage,controlBoxContainer=new createjs.Container,self.addChild(controlBoxContainer);var t=new createjs.DOMElement("foo");controlBoxContainer.addChild(t),controlBoxContainer.x=2.5,controlBoxContainer.y=2.5,stage.addChild(tAxisX),stage.addChild(yAxisX),stage.addChild(xGraphText),stage.addChild(txGraphText),stage.addChild(xShapeMask),carContainer.addChild(xAxis),motoContainer.addChild(xAxisAv),carContainer.addChild(vVec),motoContainer.addChild(vAvVec),carContainer.addChild(graphX_mc),carContainer.addChild(slope),motoContainer.addChild(slopeAv),carContainer.addChild(tDot),carContainer.addChild(xDot),motoContainer.addChild(xAvDotLines),stage.addChild(t1Dot),stage.addChild(t2Dot),stage.addChild(x1Dot),stage.addChild(x2Dot),carContainer.addChild(car_mc),motoContainer.addChild(motoMan_mc),motoMan_mc.addChild(wheel1),motoMan_mc.addChild(wheel2),motoMan_mc.addChild(motoMan),wheel1.set({x:-20,y:18}),wheel2.set({x:22,y:18}),motoMan_mc.set({x:X0,y:YAv-28}),carContainer.addChild(xVec),motoContainer.addChild(xAvVec),stage.addChild(res_txt),stage.addChild(vAv_txt),stage.addChild(t1_txt),stage.addChild(t2_txt),stage.addChild(t1Text_mc),stage.addChild(t2Text_mc),stage.addChild(tText_mc),carContainer.addChild(vText_mc),motoContainer.addChild(vAvText_mc),stage.addChild(motoContainer),stage.addChild(carContainer),stage.addChild(tPoint_mc),stage.addChild(t1Point_mc),stage.addChild(t2Point_mc),carContainer.addChild(xPoint),motoContainer.addChild(xAvPoint),createRegister(),stage.addChild(Ψ),addFunction(),showHideVariables(),handleComplete(),initialize(),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",tick),canvas.style.visibility="visible",document.getElementById("variables").style.visibility="visible"}function initialize(){xAxis.xAxisCreate(-1,12,xScale/10),xAxisAv.xAxisCreate(-1,12,xScale/10),tEnd=Lpx/tSCALE,tAxisX.tAxisCreate(Lpx/tSCALE,tSCALE),yAxisX.yAxisCreate(10*DYMinX/xSCALE,-10*DYMaxX/xSCALE,.1*xSCALE),xGraphText.set({x:Xx-20,y:Yx-Hpx-85}),txGraphText.set({x:Xx+Lpx+26,y:Yx}),drawtDot(t1Dot,t1),drawtDot(t2Dot,t2),drawxDot(xDot,t),drawxDot(x1Dot,t1),drawxDot(x2Dot,t2),drawPositionsTime(),drawAvSlope(t1,t2),restart()}function restart(){isOk||stage.removeAllChildren(),t=t1,xAv=x(t1),firstStop=!1,positions()}function tick(e){playMovie&&(framePlay=framePlay&&(playMovie=!1),0<=t+dt&&t<=7&&(t2<=(t+=dt)&&!firstStop&&(t=t2,firstStop=!0,$("#play").trigger("click")),positions()))}function positions(){var e=X0+x(t)*xScale,i=v(t);xAv=x(t1)+vAv*(t-t1);var n=X0+xAv*xScale;car_mc.x=e,vVec.x=e,xVec.setSlimScaleX((x(t)-x(t1))*xScale),motoMan_mc.x=n,vAvVec.x=n,xAvVec.setSlimScaleX(vAv*(t-t1)*xScale),updateTextSlimVector(vAvText_mc,vAvVec,12,0),drawSlope(t),i<0?car_mc.scaleX=-1:0<i?car_mc.scaleX=1:0==i&&(0<=a(t)?car_mc.scaleX=1:car_mc.scaleX=-1),vAv<0?motoMan_mc.scaleX=-1:0<i&&(motoMan_mc.scaleX=1),xAvDotLines.graphics.clear().ss(.8).s("#666").sd([5,5]).mt(Xx+t*tSCALE,Yx).lt(Xx+t*tSCALE,Yx+xAv*xSCALE).lt(Xx,Yx+xAv*xSCALE),xAvPoint.visible=xAvDotLines.visible=t<=t2&&t1<=t,xPoint.set({x:Xx+t*tSCALE,y:Yx+x(t)*xSCALE}),xAvPoint.set({x:Xx+t*tSCALE,y:Yx+xAv*xSCALE}),wheel1.rotation=(0<vAv?1:-1)*toDeg*xScale*(xAv-x(t1))/8,wheel2.rotation=(0<vAv?1:-1)*toDeg*xScale*(xAv-x(t1))/8,res_txt.text="t = "+t.toFixed(2)+" с,  x = "+(10*x(t)).toFixed(2)+" м,  υ = "+(10*v(t)).toFixed(1)+" м/с,",vAv_txt.text="υ_m = "+(10*vAv).toFixed(1)+" м/с",stage.update()}