


function mouseDownGen(e){var t=canvas.width,a=canvas.height;"yAxis"==e.target.name&&(e.target.Y0=Y0,e.target.Y1=Y0+y01*yScale,e.target.Y2=Y0+y02*yScale),e.target.offset={x:e.target.x-e.stageX*(720/t),y:e.target.y-e.stageY*(420/a)},e.target.addEventListener("pressmove",pressMoveGen),removeClones(),updateLabels(e.target.name)}function pressMoveGen(e){var t=canvas.width,a=canvas.height,n=(e.stageX,e.target.offset.x,e.stageY*(420/a)+e.target.offset.y);if("yAxis"==e.target.name)n<40&&(n=40),n>YGround&&(n=YGround),Y0=n,y01=(e.target.Y1-Y0)/yScale,y02=(e.target.Y2-Y0)/yScale,drawAxis(),takeValidValue(Y0,yScale),updateSlidersAndSpinners("point"+selectedBody),restart();else if("point1"==e.target.name){n>YGround&&(n=YGround),y01=(n-Y0)/yScale,takeValidValue(Y0,yScale);var r=round(Math.round(y01/yAxis.step)*yAxis.step,1);$("#ySpinner").spinner().val(ε*r),$("#ySlider").slider({value:ε*r}),restart()}else if("point2"==e.target.name){n>YGround&&(n=YGround),y02=(n-Y0)/yScale,takeValidValue(Y0,yScale);r=round(Math.round(y02/yAxis.step)*yAxis.step,1);$("#ySpinner").spinner().val(ε*r),$("#ySlider").slider({value:ε*r}),restart()}else"tAxisX"==e.target.name?(n>YG+(Hpx-15)&&(n=YG+(Hpx-15)),n<YG-(Hpx-15)&&(n=YG-(Hpx-15)),Yx=n,DYMinX=YG+Hpx-Yx,DYMaxX=2*Hpx-DYMinX,tAxisX.set({x:Xx,y:Yx}),yAxisX.set({x:Xx,y:Yx}),txGraphText.set({x:Xx+Lpx+26,y:Yx}),xaPlot.set({x:Xx,y:Yx}),xbPlot.set({x:Xx,y:Yx}),x1Plot.set({x:Xx,y:Yx}),x2Plot.set({x:Xx,y:Yx}),drawAllGraphs(),positions()):"tAxisV"==e.target.name&&(n>YG+(Hpx-15)&&(n=YG+(Hpx-15)),n<YG-(Hpx-15)&&(n=YG-(Hpx-15)),Yv=n,DYMinV=YG+Hpx-Yv,DYMaxV=2*Hpx-DYMinV,tAxisV.set({x:Xv,y:Yv}),yAxisV.set({x:Xv,y:Yv}),tvGraphText.set({x:Xv+Lpx+26,y:Yv}),v1Plot.set({x:Xv,y:Yv}),v2Plot.set({x:Xv,y:Yv}),vaPlot.set({x:Xv,y:Yv}),vbPlot.set({x:Xv,y:Yv}),drawAllGraphs(),positions())}function pressUpGen(e){if("yAxis"==e.target.name){var t=Y0,a=Number(((YGround-t)/yScale).toFixed(1));t=YGround-a*yScale,y01=(Y0-t)/yScale+y01,y02=(Y0-t)/yScale+y02,Y0=t,drawAxis(),takeValidValue(Y0,yScale),updateSlidersAndSpinners("point"+selectedBody),restart()}else if("point1"==e.target.name){var n=yAxis.step;y01=round(Math.round(y01/n)*n,1),takeValidValue(Y0,yScale),$("#ySpinner").spinner().val(ε*y01),$("#ySlider").slider({value:ε*y01}),restart()}else"point2"==e.target.name&&(y02=round(Math.round(y02/yAxis.step)*yAxis.step,1),takeValidValue(Y0,yScale),$("#ySpinner").spinner().val(ε*y02),$("#ySlider").slider({value:ε*y02}),restart());e.target.removeEventListener("pressmove",pressMoveGen)}function clickGen(e){e.target.scale=.5,g=-gravity[e.target.idx],planetsText.text=planets[e.target.idx],restart()}function mouseOverGen(e){stageUpdateFlag=!0,images.setChildIndex(e.target,images.numChildren-1),e.target.cnt=0,e.target.addEventListener("tick",myTween)}function myTween(e){e.target.cnt++,e.target.scale+=.2*(.8-e.target.scale),15<=e.target.cnt&&(e.target.removeEventListener("tick",myTween),stageUpdateFlag=!1)}function updateLabels(e){"point1"==e?(selectedBody=1,document.getElementById("mass").innerHTML="1-я масса тела",document.getElementById("position").innerHTML="Положение 1-го тела",document.getElementById("velocity").innerHTML="1-я скорость тела",updateSlidersAndSpinners("point1")):"point2"==e&&(selectedBody=2,document.getElementById("mass").innerHTML="2-я масса тела",document.getElementById("position").innerHTML="Положение 2-го тела",document.getElementById("velocity").innerHTML="2-я скорость тела",updateSlidersAndSpinners("point2"))}function mouseOutGen(e){e.target.removeEventListener("tick",myTween),stageUpdateFlag=!1,e.target.scale=.5,stage.update()}function mouseDownRuler(e){var t=canvas.width,a=canvas.height;e.target.offset={x:e.target.parent.x-e.stageX*(720/t),y:e.target.parent.y-e.stageY*(420/a)},e.target.addEventListener("pressmove",pressMoveRuler),e.target.oldRotation=e.target.parent.rotation,e.target.φi=Math.atan2(-e.target.offset.y,-e.target.offset.x)*toDeg,e.target.oldMouse={x:e.stageX*(720/t),y:e.stageY*(420/a)}}function pressMoveRuler(e){var t=canvas.width,a=canvas.height,n=(e.stageX,e.target.offset.x,e.stageY*(420/a)+e.target.offset.y);e.target.parent.y=n,stage.update()}function pressUpRuler(e){e.target.removeEventListener("pressmove",pressMoveRuler)}